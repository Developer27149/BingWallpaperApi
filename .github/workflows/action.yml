name: Bing wallpaper action
on:
  push:
    branches: [main]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: 开启✿✿ヽ(°▽°)ノ✿
        env:
          ssh-host: ${{ secrets.SSH_HOST }}
          ssh-user: ${{ secrets.SSH_USER }}
      # Make sure the @v0.5.4 matches the current version of the
      # action
      - name: Init ssh agent
        uses: webfactory/ssh-agent@v0.5.4
        with:
          ssh-private-key: ${{ secrets.SSH_PRIVATE }}
      - name: Setup known hosts
        run: ssh-keyscan ${ssh-host} >> ~/.ssh/known_hosts
      - name: Run SSH Commands
        run: ssh ${ssh-user}@${ssh-host} "cd BingWallpaperApi && git pull -f && bash ./.github/scripts/main.sh"
